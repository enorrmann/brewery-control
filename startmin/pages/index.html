<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Panel de control</title>

        <!-- Bootstrap Core CSS -->
        <link href="../css/bootstrap.min.css" rel="stylesheet">

        <!-- MetisMenu CSS -->
        <link href="../css/metisMenu.min.css" rel="stylesheet">

        <!-- Timeline CSS -->
        <link href="../css/timeline.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="../css/startmin.css" rel="stylesheet">

        <!-- Morris Charts CSS -->
        <link href="../css/morris.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>

        <div id="wrapper">
            <div id="page-wrapper">
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">Panel de control</h1>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
                <div class="row">
                    
                <!-- UN TACHO INICIO -->
                    <div class="col-lg-3 col-md-6">
                        <div id="panelTacho0" class="panel panel-green">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-4">
                                    <i id="thermo0" class="fa fa-thermometer-half fa-5x"></i> <span class="fa fa-3x tacho0">...</span>
                                    </div>

                                    <div class="col-xs-8 text-right">
                                        <div class="huge"><span class="maxtacho0">...</span>&deg;</div>
                                        <div>Limite Tacho 1</div>
                                    </div>
                                </div>
                            </div>
                            <a href="#">
                                <div class="panel-footer">
                                    <input id="input0" type="text" class="form-control" placeholder="Setear limite">
                                    <span class="pull-right"><i onclick="setMax(0)" class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- UN TACHO FIN -->
                <!-- UN TACHO INICIO -->
                    <div class="col-lg-3 col-md-6">
                        <div id="panelTacho1" class="panel panel-green">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-4">
                                    <i id="thermo1" class="fa fa-thermometer-half fa-5x"></i> <span class="fa fa-3x tacho1">...</span>
                                    </div>

                                    <div class="col-xs-8 text-right">
                                        <div class="huge"><span class="maxtacho1">...</span>&deg;</div>
                                        <div>Limite Tacho 2</div>
                                    </div>
                                </div>
                            </div>
                            <a href="#">
                                <div class="panel-footer">
                                    <input id="input1" type="text" class="form-control" placeholder="Setear limite">
                                    <span class="pull-right"><i onclick="setMax(1)" class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- UN TACHO FIN -->
                <!-- UN TACHO INICIO -->
                    <div class="col-lg-3 col-md-6">
                        <div id="panelTacho2" class="panel panel-green">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-4">
                                    <i id="thermo2" class="fa fa-thermometer-half fa-5x"></i> <span class="fa fa-3x tacho2">...</span>
                                    </div>

                                    <div class="col-xs-8 text-right">
                                        <div class="huge"><span class="maxtacho2">...</span>&deg;</div>
                                        <div>Limite Tacho 3</div>
                                    </div>
                                </div>
                            </div>
                            <a href="#">
                                <div class="panel-footer">
                                    <input id="input2" type="text" class="form-control" placeholder="Setear limite">
                                    <span class="pull-right"><i onclick="setMax(2)" class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- UN TACHO FIN -->
                <!-- UN TACHO INICIO -->
                    <div class="col-lg-3 col-md-6">
                        <div id="panelTacho3" class="panel panel-green">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-4">
                                    <i id="thermo3" class="fa fa-thermometer-half fa-5x"></i> <span class="fa fa-3x tacho3">...</span>
                                    </div>

                                    <div class="col-xs-8 text-right">
                                        <div class="huge"><span class="maxtacho3">...</span>&deg;</div>
                                        <div>Limite Tacho 4</div>
                                    </div>
                                </div>
                            </div>
                            <a href="#">
                                <div class="panel-footer">
                                    <input id="input3" type="text" class="form-control" placeholder="Setear limite">
                                    <span class="pull-right"><i onclick="setMax(3)" class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- UN TACHO FIN -->
                  
      
                </div>
                <!-- /.row -->
            </div>
            <!-- /#page-wrapper -->

        </div>
        <!-- /#wrapper -->

        <!-- jQuery -->
        <script src="../js/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../js/metisMenu.min.js"></script>

        <!-- Morris Charts JavaScript 
        <script src="../js/raphael.min.js"></script>
        <script src="../js/morris.min.js"></script>
        <script src="../js/morris-data.js"></script>
        -->

        <!-- Custom Theme JavaScript -->
        <script src="../js/startmin.js"></script>
        <script src = "/socket.io/socket.io.js"></script>
   
<script>
   var socket = io();

    var setMax = function(idx){
        var valor = $('#input'+idx).val();
        socket.emit('setMax',{index:idx, valor:valor});
        $(".maxtacho"+idx).html(valor);
        $('#input'+idx).val('');
    };

    var setClasses = function(index,status){
        if (status==1){
            $('#panelTacho'+index).addClass('panel-red').removeClass('panel-green');
            $('#thermo'+index).addClass('fa-thermometer-full').removeClass('fa-thermometer-half');
        } else {
            $('#panelTacho'+index).addClass('panel-green').removeClass('panel-red');
            $('#thermo'+index).addClass('fa-thermometer-half').removeClass('fa-thermometer-full');
        }

    }

   socket.on('message', function(data){
        var dataArray = data.split(";");

        $(".maxtacho0").html(dataArray[1]);
        $(".maxtacho1").html(dataArray[2]);
        $(".maxtacho2").html(dataArray[3]);
        $(".maxtacho3").html(dataArray[4]);

        $(".tacho0").html(dataArray[5]+'&deg');
        $(".tacho1").html(dataArray[6]+'&deg');
        $(".tacho2").html(dataArray[7]+'&deg');
        $(".tacho3").html(dataArray[8]+'&deg');

        var comp0 = dataArray[9];
        var comp1 = dataArray[10];
        var comp2 = dataArray[11];
        var comp3 = dataArray[12];

        setClasses(0,comp0);
        setClasses(1,comp1);
        setClasses(2,comp2);
        setClasses(3,comp3);

   });
</script>
    </body>
</html>
